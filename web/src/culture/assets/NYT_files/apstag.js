/*! amazon-dtb-javascript-api - apstag - v7.44.02 - 2019-11-19 20:09:41 */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=21)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e}function i(){return document.cookie.split("; ").map(function(e){return e.split("=")})}t.shouldSample=function(e){try{var t=parseInt(e,10);if(!isNaN(t)){if(t<=0)return!1;if(100<=t)return!0;if(100*Math.random()<=t)return!0}return!1}catch(e){return!1}},t.chunkArray=function(e,t){var r=parseInt(t,10),n=[],o=0;if(!Array.isArray(e))return n;if("number"!=typeof r||r<1)return[e];for(var i=e.length;o<i;)n.push(e.slice(o,o+=r));return n},t.getRand=function(){return""+Math.round(1e12*Math.random())+Date.now()},t.getRandString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=new Array(e),n=0;n<e;n++)r[n]=t[Math.floor(Math.random()*t.length)];return r.join("")},t.isObject=o,t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.safeObjectHasProp=function(e,t){return o(e)&&Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]&&""!==e[t]},t.hasLocalStorage=function(){var e="amzn_lsTest";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}},t.inArray=function(e,t){return-1!==e.indexOf(t)},t.getCookieParts=i,t.getCookieValue=function(e){var t="";try{t=i().filter(function(t){return t[0]===e})[0][1]}catch(t){}return t},t.getUTCStringForDate=function(e){var t=new Date;return t.setDate(t.getDate()+e),t.toUTCString()},t.getWindowDimensions=function(e){try{return(e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth)+"x"+(e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight)}catch(e){}return"x"},t.areTwoUrlsTheSame=function(e,t){return decodeURIComponent(e).split("?")[0].split("#")[0]===decodeURIComponent(t).split("?")[0].split("#")[0]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DISPLAY_TARGETING_KEYS=["amznbid","amzniid","amznsz","amznp"],t.VIDEO_TARGETING_KEYS=["amznbid","amzniid","amznp","r_amznbid","r_amzniid","r_amznp"],t.BID_STATES={new:"NEW",exposed:"EXPOSED",set:"SET",rendered:"RENDERED"};var n,o,i,a=t.RB_AID_COOKIE_KEY="__aps_f_aid";t.RB_HOST_COOKIE_KEY="__aps_host",t.RB_MAGIC_NUMBER_FOR_AID_PRESENT=1,t.RB_PAGELOAD_ID_GLOBAL="apsPageloadID",t.IS_GET_BIDS_URL_PARAM={isgb:1},t.DEBUG_LOCAL_STORAGE_KEY="apstagDebug",t.VALID_DEBUG_MODES=["redux","fake_bids","verbose","console","console_v2","errors"],t.DEBUG_CONSOLE_HEIGHT_KEY="apstagDebugHeight",t.DEBUG_GLOBAL="apstagDEBUG",t.CFG_LOCAL_STORAGE_KEY="apstagCfg",t.NO_LOCAL_STORAGE_SUPPORT_MAGIC_NUMBER_FOR_AAX=0,t.MINIMUM_BID_TIMEOUT=0,t.MOCKBID={amznbid:"testBid",amzniid:"testImpression",amznp:"testP",crid:"testCrid"},t.MEDIA_TYPES_MAGIC_STRING_FOR_AAX={video:"v"},t.SLOT_STATE_KEYS=["amznbid","amznp"],t.FIRST_PARTY_COOKIE_KEYS=(i={urlParam:"aidp"},(o=a)in(n={__apsid:{urlParam:"ck"},__aps_id_p:{urlParam:"ckp"},aps_ext_917:{urlParam:"st"}})?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n),t.SLOT_STATES={noRequest:"0",bidInFlight:"1",noBid:"2"},t.AAX_RESP_REMAP_COOKIE_KEY="cr",t.SELF_SERVE_PUB_SRC="600",t.LIBRARY_VERSION="7.44.02",t.PROTOCOL="https://",t.HAS_XHR_SUPPORT="function"==typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials,t.APSTAG_LOADED_VARIABLE="apstagLOADED"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportError=m,t.wrapFunction=function(e,t){return function(){try{return e.apply(null,arguments)}catch(e){return m(e,t),null}}},t.consoleWarn=function(e){(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||(0,s.isDebugEnabled)("errors"))&&window[u][l](e)};var n=r(0),o=r(1),i=r(5),a=r(3),s=r(4),c=(0,n.shouldSample)(10),u="console",d="error",l="warn",f=void 0,p=void 0,g=[];function m(e,t,r){try{(r||(0,s.isDebugEnabled)("errors"))&&window[u][d](e);var l=(0,n.safeObjectHasProp)(window,"document")&&(0,n.safeObjectHasProp)(window.document,"documentURI")?window.document.documentURI:"",m=(0,n.safeObjectHasProp)(window,"document")&&(0,n.safeObjectHasProp)(window.document,"referrer")?window.document.referrer:"",_={lv:o.LIBRARY_VERSION,ts:Date.now(),url:encodeURIComponent(l),r:encodeURIComponent(m),_type:"apsLibraryError",e:{et:e.name,el:t,msg:e.message}};if(void 0===f){var S=a.store.getState();void 0!==S&&void 0!==S.config&&(f=S.config.isSelfServePub,p=S.config.pubID)}return void 0!==f&&(f?(_.src=o.SELF_SERVE_PUB_SRC,_.pubid=p):_.src=p),g.push(_),a.store.dispatch({type:"LOG_ERROR",error:_}),!!c&&((0,i.noBidCacheIdPixel)(_),!0)}catch(e){}return!1}!0===(0,s.getDebugValue)("exposeErrors")&&(window.apstagErrors=g)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.reducer=f,t.resetState=function(){d=!1,p.dispatch({type:"NOOP"})};var o=r(1),i=r(6),a=r(0),s=r(4);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var d=void 0,l=[];function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{AAXReqs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"RECORD_AAX_REQUEST":return[].concat(u(e),[n({},t.data)]);case"RECORD_AAX_REQ_PROP":return e.map(function(e){return(e=n({},e)).bidReqID===t.bidReqID&&(e[t.key]=t.value),e});default:return[].concat(u(e))}}(e.AAXReqs,t),amznCsmParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SET_AMZNCSMPARAMS":return n({},t.amznCsmParams);default:return e}}(e.amznCsmParams,t),bidConfigs:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"RECORD_ORIGINAL_BID_CONFIG":return n({},e,c({},t.bidConfig.bidReqID,n({},t.bidConfig)));default:return n({},e)}}(e.bidConfigs,t),bidReqs:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];switch(r.type){case"ADD_CHUNKED_REQUESTS":return n({},t,c({},r.fid,n({},t[r.fid],{networkReqs:new Array(r.numChunks)})));case"NEW_FETCH_BID_REQUEST":return n({},t,c({},r.fid,{pto:r.pto,hasCallbackExecuted:!1}));case"RECORD_CALLBACK":return n({},t,c({},r.fid,n({},t[r.fid],{hasCallbackExecuted:!0})));case"RECORD_NETWORK_EXCHANGE":return n({},t,c({},r.fid,n({},t[r.fid],{networkReqs:n([].concat(u(t[r.fid].networkReqs)),c({},r.networkID,n({},t[r.fid].networkReqs[r.networkID],(e={},c(e,r.exchangeType+"Time",r.timestamp),c(e,"inFlight","request"===r.exchangeType),e))))})));case"RECORD_TIMEOUT":return n({},t,c({},r.fid,n({},t[r.fid],{networkReqs:t[r.fid].networkReqs.map(function(e){return e.inFlight?n({},e,{timeOut:r.timeOut}):e})})));default:return n({},t)}}(e.bidReqs,t),bsPixels:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"RECORD_BID_INFO_SENT":return n({},e,c({},t.bidInfo.iid,t.bidInfo.state));default:return n({},e)}}(e.bsPixels,t),cfg:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{CSM_JS:"//c.amazon-adsystem.com/aax2/csm.js.gz",CSM_RTB_COMMUNICATOR_JS:"//c.amazon-adsystem.com/bao-csm/aps-comm/aps_csm.js",DEBUG_APP_HTML:"//c.amazon-adsystem.com/aax2/debugApp.html",DEBUG_APP_HTML_V2:"//c.amazon-adsystem.com/aax2/debug_app_v2.html",DEFAULT_TIMEOUT:2e3,DTB_PATH:"/e/dtb",PIXEL_PATH:"/x/px/",LATENCY_SAMPLING_RATE:1,COOKIE_MATCH_DELAY:0,MAX_SLOTS_PER_REQUEST:1,CF_ROUTING_RATE:100,SLOT_RENDER_SAMPLING_RATE:1},t=arguments[1];switch(t.type){case"SET_CFG":return n({},e,t.cfg);default:return n({},e)}}(e.cfg,t),cmpFired:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case"CMP_FIRED":return!0;default:return e}}(e.cmpFired,t),config:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SET_CONFIG":return n({},t.config,{gdpr:n({cmpTimeout:t.defaultCmpTimeout},t.config.gdpr),isSelfServePub:t.config.pubID&&5<=t.config.pubID.length});default:return n({},e)}}(e.config,t),displayAdServer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{noBidSlotIDs:[],shouldSampleRender:!1},t=arguments[1];switch(t.type){case"SLOT_RENDER_ENDED_SET":return n({},e,{slotRenderEndedSet:!0});case"NO_BID_ON_ADSERVER_SLOTS":return n({},e,{noBidSlotIDs:e.noBidSlotIDs.concat(t.slotIDs)});case"REQUESTED_BID_FOR_ADSERVER_SLOTS":return n({},e,{noBidSlotIDs:e.noBidSlotIDs.filter(function(e){return!(0,a.inArray)(t.slotIDs,e)})});case"SHOULD_SAMPLE_SLOT_RENDER":return n({},e,{shouldSampleRender:t.value});default:return n({},e,{noBidSlotIDs:[].concat(u(e.noBidSlotIDs))})}}(e.displayAdServer,t),errors:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"LOG_ERROR":return[].concat(u(e),[n({},t.error)]);default:return[].concat(u(e))}}(e.errors,t),eventLog:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"LOG_EVENT":return[].concat(u(e),[n({},t.event)]);default:return[].concat(u(e))}}(e.eventLog,t),experiments:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SHOULD_CHUNK_REQUESTS":return n({chunkRequests:!0===e.shouldSampleLatency&&t.value},e);case"SHOULD_CF_ROUTE":return n({},e,{shouldCFRoute:t.value});case"SHOULD_SAMPLE_LATENCY":return n({},e,{shouldSampleLatency:t.value});default:return n({},e)}}(e.experiments,t),gamSlotFetchLog:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"LOG_GAM_EVENT":return[].concat(u(e),[n({},t.event)]);default:return[].concat(u(e))}}(e.gamSlotFetchLog,t),gamSlotRenderPixel:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{aaxReqOffset:0,gamSlotFetchLogOffset:0},t=arguments[1];switch(t.type){case"UPDATE_RENDER_OFFSETS":return n({},e,t.offsets);default:return n({},e)}}(e.gamSlotRenderPixel,t),gdpr:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case"SET_GDPR_CONFIG":return null===t.config?null:n({},t.config);default:return null===e?e:n({},e)}}(e.gdpr,t),gdprQue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_GDPR_QUE_ITEM":return[].concat(u(e),[t.func]);case"CLEAR_GDPR_QUE":return[];default:return[].concat(u(e))}}(e.gdprQue,t),hosts:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{DEFAULT_AAX_BID_HOST:"aax.amazon-adsystem.com",DEFAULT_AAX_PIXEL_HOST:"aax.amazon-adsystem.com"},t=arguments[1];switch(t.type){case"SET_HOST":return n({},e,c({},t.hostName,t.hostValue));default:return n({},e)}}(e.hosts,t),Q:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"SET_Q":return[].concat(u(t.Q));default:return[].concat(u(e))}}(e.Q,t),slotBids:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"BID_STATE_CHANGE":return n({},e,c({},t.slotID,e[t.slotID].map(function(e){var r={};return e._targetingSetID===t._targetingSetID&&(r.bidState=t.bidState,t.bidState===o.BID_STATES.rendered?r.renderTime=t.ts:t.bidState===o.BID_STATES.set&&(r.setAtTimes=(0,a.safeObjectHasProp)(e,"setAtTimes")?[].concat(u(e.setAtTimes),[t.ts]):[t.ts])),n({},e,r)})));case"UPDATE_BID_INFO_PROP":return void 0===e[t.slotID]||e[t.slotID].filter(function(e){return(0,i.checkAllPossibleBidCacheIds)(e,t.iid,t.dealId)}).length<1?n({},e):n({},e,c({},t.slotID,e[t.slotID].map(function(e){return e=n({},e),(0,i.checkAllPossibleBidCacheIds)(e,t.iid,t.dealId)&&(e[t.key]=t.value),e})));case"UPDATE_SLOT_BIDS":return n({},e,t.bids.reduce(function(t,r){return(0,a.safeObjectHasProp)(t,r.slotID)?t[r.slotID]=[].concat(u(t[r.slotID]),[n({},r)]):(0,a.safeObjectHasProp)(e,r.slotID)?t[r.slotID]=[].concat(u(e[r.slotID]),[n({},r)]):t[r.slotID]=[n({},r)],t},{}));default:return n({},e)}}(e.slotBids,t),slotIdMap:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_SLOT_ID":return e.includes(t.slotID)?e:[].concat(u(e),[t.slotID]);default:return e}}(e.slotIdMap,t),sync917:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case"SET_SYNC_917":return t.value;default:return e}}(e.sync917,t),targetingKeys:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"UPDATE_SLOT_BIDS":return n({},e,t.bids.reduce(function(t,r){return(0,a.safeObjectHasProp)(e,r.slotID)?t[r.slotID]=[].concat(u(e[r.slotID]),u((r.targeting?r.targeting:o.DISPLAY_TARGETING_KEYS).filter(function(t){return-1===e[r.slotID].indexOf(t)}))):t[r.slotID]=r.targeting?r.targeting:o.DISPLAY_TARGETING_KEYS,t},{}));default:return n({},e)}}(e.targetingKeys,t),tests:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"UPDATE_TEST":return n({},e,c({},t.id,{name:t.name,status:t.status,case:t.case}));default:return n({},e)}}(e.tests,t)}}var p={getState:function(){return d},dispatch:function(e){d=f(d,e),l.forEach(function(e){return e()})},subscribe:function(e){l.push(e)}};(0,s.isDebugEnabled)("redux")&&(0,a.hasLocalStorage)()&&(0,a.safeObjectHasProp)(window,"__REDUX_DEVTOOLS_EXTENSION__")&&(t.store=p=window.__REDUX_DEVTOOLS_EXTENSION__(f)),p.dispatch({type:"NOOP"}),t.store=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugPublicApi=function(e,t,r){switch(-1!==u.indexOf(e)&&((0,c.reportError)("Debug call made: "+e,"__apstag-debug-call-"+e+"__"),u=u.filter(function(t){return t!==e})),e){case"getLog":return n.store.getState().eventLog;case"getState":return n.store.getState();case"enable":return D("fake_bids",!0),"DEBUG MODE ENABLED";case"disable":return D("fake_bids",!1),"DEBUG MODE DISABLED";case"enableConsole":return g(!1,"command"),"Debug console enabled";case"enableConsoleV2":return g(!0,"command"),"Debug console v2 enabled";case"disableConsole":return m(),"Debug console disabled";case"setDebug":return D(t,r)?"Set debug mode '"+t+"' to '"+r+"'":"Failed to set debug mode '"+t+"' to '"+r+"'";default:return"unknown debug argument"}},t.enableDebugConsole=g,t.disableDebugConsole=m,t.isDebugEnabled=O,t.setDebugMode=D,t.getDebugValue=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return"undefined"!=typeof window&&(0,o.safeObjectHasProp)(window,i.DEBUG_GLOBAL)&&(0,o.safeObjectHasProp)(window[i.DEBUG_GLOBAL],e)?window[i.DEBUG_GLOBAL][e]:t},t.pixelDebugModes=I;var n=r(3),o=r(0),i=r(1),a=r(7),s=r(5),c=r(2),u=["getLog","getState"],d=null,l=null,f=null,p=null;function g(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(D(e?"console_v2":"console",!0),null===d){var r={url:e?n.store.getState().cfg.DEBUG_APP_HTML_V2:n.store.getState().cfg.DEBUG_APP_HTML,onload:_,onerror:console.error};(0,a.xhrGet)(r),setTimeout(function(){var r={_type:"debugLoad",mode:e?2:1},o=n.store.getState().config.pubID;void 0!==o&&(r.src=o),null!==t&&(r.method=t),(0,s.noBidCacheIdPixel)(r)},5e3)}}function m(){D("console",!1),D("console_v2",!1),null!==d&&document.body.removeChild(d),f=l=d=null,(0,o.hasLocalStorage)()&&window.localStorage.removeItem(i.DEBUG_CONSOLE_HEIGHT_KEY)}function _(e){var t=e.responseText;d=document.createElement("div"),l=document.createElement("div"),f=document.createElement("iframe");var r=200;O("console_v2")&&(r=330),(0,o.hasLocalStorage)()&&null!==window.localStorage.getItem(i.DEBUG_CONSOLE_HEIGHT_KEY)&&(r=window.localStorage.getItem(i.DEBUG_CONSOLE_HEIGHT_KEY)),r>window.innerHeight&&(r=200),d.style="background: #eaeded;z-index: 2147483647;bottom: 0;position: fixed !important;display: block !important;left: 0;right: 0;height: "+r+"px;",l.style="cursor: row-resize;height: 2px;position: absolute;top: 0;left: 0;right: 0;background-color: RGBA(0,0,0,0);",d.appendChild(l),f.frameBorder=0,f.marginHeight=0,f.marginWidth=0,f.topMargin=0,f.leftMargin=0,f.scrolling="no",f.allowTransparency=!0,f.id="apstag-debug-iframe",f.src="about:blank",f.style="display: block; width: 100%; height: "+r+"px;",d.appendChild(f),document.body.appendChild(d),f.contentDocument.open(),f.contentDocument.write(t),f.contentDocument.close(),l.addEventListener("mousedown",y)}function S(e){var t=window.innerHeight-e.clientY;return t<200&&(t=200),d.style.height=t+"px",f.style.height=t+"px",t}function b(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1}function y(){(p=document.createElement("div")).style="position: fixed; left: 0; right: 0; top: 0; bottom: 0; z-index: 9999999999;",d.appendChild(p),window.addEventListener("mouseup",v),window.addEventListener("mousemove",h)}function h(e){return S(e),b(e)}function v(e){null!==p&&(d.removeChild(p),p=null),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",v);var t=S(e);return(0,o.hasLocalStorage)()&&window.localStorage.setItem(i.DEBUG_CONSOLE_HEIGHT_KEY,t),b(e)}function E(){if(!(0,o.hasLocalStorage)())return[];var e=window.localStorage.getItem(i.DEBUG_LOCAL_STORAGE_KEY);null===e||"false"===e?e="[]":"true"===e&&(e='["fake_bids"]');var t=void 0;try{t=JSON.parse(e)}catch(e){}return(0,o.isArray)(t)||(t=[]),t.filter(function(e){return-1!==i.VALID_DEBUG_MODES.indexOf(e)})}function O(e){return(0,o.inArray)(E(),e)}function D(e,t){if(!(0,o.hasLocalStorage)())return!1;if(-1===i.VALID_DEBUG_MODES.indexOf(e))return!1;var r=E();return t&&-1===r.indexOf(e)?r.push(e):t||(r=r.filter(function(t){return t!==e})),0===r.length?window.localStorage.removeItem(i.DEBUG_LOCAL_STORAGE_KEY):window.localStorage.setItem(i.DEBUG_LOCAL_STORAGE_KEY,JSON.stringify(r)),I(),!0}var A=[];function I(){try{E().filter(function(e){return-1===A.indexOf(e)}).forEach(function(e){(0,c.reportError)(new Error("Debug method enabled: "+e),"__error-debug-mode-"+e+"__",!0),A.push(e)})}catch(e){(0,c.reportError)(e,"__error-debug-pixeled__",!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pixels=t.pixelQueue=void 0,t.sendPixel=l,t.noBidCacheIdPixel=function(e){return l(d()+"p/PH/"+u(e))},t.bidCacheIdPixel=function(e,t){return l(""+d()+e+"/"+u(t))},t.sendPixels=function(){s||(s=!0,a.forEach(l))},t.resetSendPixels=function(){s=!1,t.pixels=c=[],t.pixelQueue=a=[]};var n=r(1),o=r(3),i=r(4),a=t.pixelQueue=[],s=!1,c=t.pixels=[];function u(e){e._tl="aps-tag";var t=JSON.stringify(e);return t=t.replace(/\\.{1}/g,""),encodeURIComponent(t)}function d(){var e=o.store.getState(),t=e.cfg.PIXEL_PATH,r=e.hosts.DEFAULT_AAX_PIXEL_HOST;return""+n.PROTOCOL+r+t}function l(e){if(s){var t=new Image;return t.src=e,c.push(t),t}return a.push(e),e}!0===(0,i.getDebugValue)("exposePixels")&&(window.apstagPixelQueue=a,window.apstagPixelsSent=c)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getAmpAmznBidValue=function(e){return"string"==typeof e?e.split("_").pop():""},t.checkAllPossibleBidCacheIds=function(e,t,r){return e.amzniid===t||e[r+"amzniid"]===t||e.amzniid_sp===t},t.isAAXPunt=function(e){return!(0,i.safeObjectHasProp)(e,"slots")},t.getCurrentUrl=function(e){var t=(0,o.getDebugValue)("url");if(null!==t)return encodeURIComponent(t);var r=void 0;try{r=e.top.location.href}catch(e){r=null}if(null===r||!r||void 0===r){r="";try{e.top!==e.self&&(r=e.document.referrer)}catch(e){}}return encodeURIComponent(r)},t.getReferrerUrl=function(e){var t="",r=void 0;try{try{r=e.top.document.referrer}catch(t){r=e.document.referrer}t=encodeURIComponent(r)}catch(t){(0,a.reportError)(t,"__error-getPageReferrerURL__")}return t},t.getApsFirstPartyCookies=function(){var e={cookiesParams:""};return(0,i.getCookieParts)().forEach(function(t){if(t[0]in s.FIRST_PARTY_COOKIE_KEYS)switch(t[0]){case"aps_ext_917":e.fb=t[1];break;case s.RB_AID_COOKIE_KEY:e.cookiesParams+="&"+s.FIRST_PARTY_COOKIE_KEYS[s.RB_AID_COOKIE_KEY].urlParam+"="+s.RB_MAGIC_NUMBER_FOR_AID_PRESENT;break;default:e.cookiesParams+="&"+s.FIRST_PARTY_COOKIE_KEYS[t[0]].urlParam+"="+t[1]}}),e.fb||c.store.getState().sync917||c.store.dispatch({type:"SET_SYNC_917",value:!0}),e},t.getBlockedBidders=function(e){var t=c.store.getState().config.blockedBidders;return(0,i.safeObjectHasProp)(e,"blockedBidders")&&(0,i.isArray)(e.blockedBidders)&&(t=e.blockedBidders),(0,i.isArray)(t)&&(t=JSON.stringify(t)),t},t.getCfgVersion=function(){if(!(0,i.hasLocalStorage)())return s.NO_LOCAL_STORAGE_SUPPORT_MAGIC_NUMBER_FOR_AAX;var e=c.store.getState();return(0,i.safeObjectHasProp)(e,"cfg")&&(0,i.safeObjectHasProp)(e.cfg,"v")?e.cfg.v:null},t.getTimeout=function(e,t){var r=u(e.timeout);return!1===r&&(r=u(t.config.bidTimeout)),!1===r&&(r=u(t.cfg.DEFAULT_TIMEOUT)),r},t.executeFunctionOnceWithTimeout=function(e,t){var r=!1,n=null;function o(t){if(!r)try{e(t)}catch(t){(0,a.reportError)(t,"executeFunctionOnceWithTimeout",!0)}clearTimeout(n),r=!0}return n=setTimeout(o,t,!0),o.bind(null,!1)};var o=r(4),i=r(0),a=r(2),s=r(1),c=r(3);function u(e){if(-1===["string","number"].indexOf(void 0===e?"undefined":n(e)))return!1;try{var t=Math.floor(Number(e));if(t>s.MINIMUM_BID_TIMEOUT)return t}catch(e){(0,a.reportError)(e,"__error-getValidMilliseconds__",!0)}return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xhrGet=function(e){var t=e.url,r=e.onload,o=e.onerror,i=void 0===o?null:o,a=e.ontimeout,s=void 0===a?null:a,c=e.withCredentials,u=void 0===c?null:c;try{var d=new window.XMLHttpRequest;d.onload=r.bind(null,d),null!==i&&(d.onerror=i),null!==s&&(d.ontimeout=s),null!==u&&(d.withCredentials=u),d.open("GET",t),d.send(null)}catch(e){(0,n.reportError)(e,"__xhrGet__")}},t.loadScriptTag=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;try{if(null===r&&(r=document),void 0===e)return"function"==typeof t&&t(!0),!1;var i=r.getElementsByTagName("script")[0]||r.body.firstChild,a=r.createElement("script");return a.type="text/javascript",a.async=!0,a.src=e,t&&o(a,t),i.parentNode.insertBefore(a,i),!0}catch(e){return(0,n.reportError)(e,"__loadScriptTag__",!0),!1}},t.addOnLoadFunction=o,t.objToUrlParam=function(e){return encodeURIComponent(JSON.stringify(e))};var n=r(2);function o(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{return"function"==typeof t&&(e.readyState?e.onreadystatechange=function(){-1!==["loaded","complete"].indexOf(e.readyState)&&(e.onreadystatechange=null,t.apply(null,r))}:e.onload=function(){t.apply(null,r)},!0)}catch(e){return(0,n.reportError)(e,"__addOnLoadFunction__"),!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDPR=t.cmpLocalStorageChanged=t.cmpResponseKey=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),a=r(2);Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var s=t.cmpResponseKey="cmpRTimesA",c=t.cmpLocalStorageChanged="crfgL0cSt0rC";t.GDPR=function(e,t){e=o({},e);var r,u,d=void 0,l=50,f=[1,1,3,5],p=0,g=!1,m="crfgL0cSt0r",_=!1,S="cmp-timeout";try{t=(0,a.wrapFunction)(t,"GdprCallback");var b=function(e){try{e=o({},e),Object.keys(e.log).map(function(t){"string"==typeof e.log[t]&&-1!==e.log[t].indexOf("/")&&(e.log[t]=encodeURIComponent(e.log[t]))}),e.log=JSON.stringify(e.log)}catch(e){(0,a.reportError)(e,"__gdpr_stringify_log__",!0)}t(e)};"object"===(void 0===e?"undefined":n(e))&&null!==e||(e={});var y={cmpGlobal:e.cmpGlobal,cmpTimeout:e.cmpTimeout,enabled:e.enabled};!1===e.enabled?y.status="explicit-no-gdpr":!0===e.enabled&&(y.status=void 0!==e.consent?"explicit-consent-passed":"explicit-no-consent-passed"),(0,i.hasLocalStorage)()&&(_=function(){try{var e=window.localStorage.getItem(m);return null!==e&&JSON.parse(e)}catch(e){return(0,a.reportError)(e,"__gdpr_parse_ls__"),!1}}()),!1!==_&&(void 0===window.document.cookie||-1===window.document.cookie.indexOf(m+"=true")?(_=!1,y.lsStatus="invalid"):(y.lsStatus="present",l=50,S="cmp-timeout-cfb")),"string"!=typeof e.cmpGlobal&&(e.cmpGlobal="__cmp"),Number.isInteger(e.cmpTimeout)||(e.cmpTimeout=l);var h=(u={log:y},void 0===(r=e).enabled||(!1===r.enabled?u.enabled=0:(Number.isInteger(r.enabled)?u.enabled=r.enabled:u.enabled=1,"string"==typeof r.consent&&(u.consent=r.consent))),u);if(void 0!==h.enabled)return void b(h);!1!==_&&(h=o({},_,h)),!1===_||_.enabled===h.enabled&&_.consent===h.consent||(y.lsStatus="pub-override"),function e(t,r){if(!(0,i.safeObjectHasProp)(window,t.cmpGlobal)||"function"!=typeof window[t.cmpGlobal])return r({error:"no-cmp"}),void(p<f.length&&(setTimeout(e,1e3*f[p],t,r),p++));setTimeout(r,t.cmpTimeout,{timeout:!0},!0),d=Date.now();try{window[t.cmpGlobal]("getConsentData",null,r)}catch(e){r({error:"cmp-internal-error"}),(0,a.reportError)(e,"__gdpr_cmp__",!0)}}(e,function(e,t,r){if(!g||"object"!==(void 0===t?"undefined":n(t))||null===t||!t.timeout){g=!0;try{return"object"===(void 0===t?"undefined":n(t))&&null!==t&&void 0!==t.error?(y.status=t.error,void b(e)):r&&"object"===(void 0===t?"undefined":n(t))&&null!==t?t.timeout?(y.status=S,void b(e)):(function(e){if((0,i.hasLocalStorage)())try{var t=window.localStorage.getItem(s);(t=null!==t?JSON.parse(t):[]).push(e),window.localStorage.setItem(s,JSON.stringify(t))}catch(e){(0,a.reportError)(e,"__gdpr_save_time__")}}(Date.now()-d),y.status="success",t.gdprApplies?(e.enabled=1,e.consent=t.consentData):(e.enabled=0,delete e.consent),function(e){try{if(!(0,i.hasLocalStorage)())return;window.localStorage.setItem(c,"0"),!1!==_&&_.enabled===e.enabled&&_.consent===e.consent||(window.localStorage.setItem(c,"2"),window.localStorage.setItem(m,JSON.stringify({enabled:e.enabled,consent:e.consent})),!1!==_&&(y.lsStatus="cmp-override",window.localStorage.setItem(c,"1"))),window.document.cookie=m+"=true;max-age=604800"}catch(e){return void(0,a.reportError)(e,"__gdpr_save__")}}(e),void b(e)):(y.status="cmp-error",void b(e))}catch(t){return(0,a.reportError)(t,"__gdpr_cmp_callback__",!0),y.status="func-error",void b(e)}}}.bind(null,h))}catch(e){g||t({log:'{"status":"global-func-error"}'}),g=!0,(0,a.reportError)(e,"__gdpr_global_func__",!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetricFromPerformanceObject=o,t.getResourcePerformanceObject=function(e,t){try{var r=i(e,t)[0];return void 0===r?null:r}catch(e){return null}},t.getPerformanceResourceObjects=i,t.getWindowPerformanceMetric=function(e,t){try{var r=e.performance.timing[t];return void 0===r?n:r}catch(e){return n}},t.isResourceCached=function(e){try{if(0===["redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","secureConnectionStart"].reduce(function(t,r){return t+o(e,r)},0))return null;var t=o(e,"fetchStart");return["domainLookupStart","domainLookupEnd","connectStart","connectEnd"].reduce(function(r,n){return r&&o(e,n)===t},!0)}catch(e){return null}},t.getTimeOrigin=function(){try{var e=window.performance.timeOrigin;return void 0===e&&(e=window.performance.timing.navigationStart),e}catch(e){return n}};var n=0;function o(e,t){try{return"number"!=typeof e[t]?n:Math.round(e[t])}catch(e){return n}}function i(e,t){try{return e.performance.getEntriesByType("resource").filter(function(e){return t.test(e.name)})}catch(e){return[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.getDisplayAdServerSlots=function(e){var t=[];try{e.hasAdServerObjectLoaded()&&(t=e.getSlots())}catch(e){(0,o.reportError)(e,"getDisplayAdServerSlots")}return t},t.doesSlotHaveSizes=function(e){return(0,i.safeObjectHasProp)(e,"sizes")&&(0,i.isArray)(e.sizes)&&0!==e.sizes.length},t.isDisplaySlot=function(e){return"video"!==e.mediaType},t.getSlotID=function(e){return e.slotID},t.normalizeSlotsSizeArray=function(e){try{return e.map(function(e){return(0,i.safeObjectHasProp)(e,"sizes")&&(0,i.isArray)(e.sizes)&&0<e.sizes.length&&!(0,i.isArray)(e.sizes[0])?n({},e,{sizes:[e.sizes]}):e})}catch(e){(0,o.reportError)(e,"__error-adjustSlotArraySizes__",!0)}return[]};var o=r(2),i=r(0)},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayAdServerGoogletag=void 0,t.constructApsSlotObject=c,t.turnGptSlotsIntoApsSlots=function(e){return e.map(c).filter(o.doesSlotHaveSizes)};var n=r(0),o=r(10),i=r(2),a={isSupported:!0,needNewBidObject:!1,cmdQueuePush:function(e){googletag.cmd.push(e)},setTargeting:function(e,t,r){void 0===r?googletag.pubads().setTargeting(e,t):r.setTargeting(e,t)},getTargeting:function(e,t){return void 0===t?googletag.pubads().getTargeting(e):t.getTargeting(e)},clearTargeting:function(e,t){void 0===t?googletag.pubads().clearTargeting(e):t.clearTargeting(e)},slotRenderEndedEvent:function(e){googletag.pubads().addEventListener("slotRenderEnded",e)},hasAdServerObjectLoaded:function(){return"undefined"!=typeof googletag&&(0,n.safeObjectHasProp)(googletag,"apiReady")&&!0===googletag.apiReady},isCommandQueueDefined:function(){return"undefined"!=typeof googletag&&void 0!==googletag.cmd},getSlotElementId:function(e){return e.getSlotElementId()},getSlots:function(){return googletag.pubads().getSlots()},appendTargeting:function(){}};function s(e){var t=[];try{t=e.filter(function(e){return"fluid"!==e}).map(function(e){return[e.getWidth(),e.getHeight()]})}catch(e){}return t}function c(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=(0,n.getWindowDimensions)(window).split("x");if(!1!==t)try{!function(e,t){var r=t.join("x"),n=s(e.getSizes(Number(r[0]),Number(r[1]))).map(function(e){return e.join("x")}).sort(),o=s(e.getSizes(Number(t[0]),Number(t[1]))).map(function(e){return e.join("x")}).sort(),a=o.filter(function(e){return!n.includes(e)}),c=n.filter(function(e){return!o.includes(e)});if(0!==a.length||0!==c.length){var u={name:"",message:"Missing: "+a.join(",")+"|Extra: "+c.join(",")};0<a.length&&0<c.length?u.name="Missing and Extra Sizes":0<a.length?u.name="Missing Sizes":u.name="Extra Sizes",(0,i.reportError)(u,"sizeMappingBugImpact")}}(e,r)}catch(e){(0,i.reportError)(e,"checkForBugImpact")}return{slotID:e.getSlotElementId(),slotName:e.getAdUnitPath(),sizes:s(e.getSizes(Number(r[0]),Number(r[1])))}}t.displayAdServerGoogletag=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_RENDER_BIDDING_PAGELOAD=void 0,t.getPageLoadID=function(){return u?window[n.RB_PAGELOAD_ID_GLOBAL]:(0,o.getRandString)(s)},t.setRenderBiddingHosts=function(){var e=c(a)?a:"aax";i.store.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_BID_HOST",hostValue:e+".amazon-adsystem.com"}),i.store.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_PIXEL_HOST",hostValue:e+".amazon-adsystem.com"})},t.isFirstAAXRequest=function(e){return 0===e.AAXReqs.length},t.isRenderBiddingGetBidsRequest=function(e){return-1!==e.indexOf(n.IS_GET_BIDS_URL_PARAM)},t.injectCBForGetBids=function(e,t){if(-1<t.indexOf('"cb":'))return t;var r=t.split(/\}\)$/),n=e.split("?")[1].split("&").filter(function(e){return-1<e.indexOf("cb=")})[0].split("=")[1];return r[0]+(-1<t.indexOf("{}")?"":",")+'"cb":"'+n+'"})'};var n=r(1),o=r(0),i=r(3),a=(0,o.getCookieValue)(n.RB_HOST_COOKIE_KEY),s=13;function c(e){return""!==e}var u=t.IS_RENDER_BIDDING_PAGELOAD=(0,o.safeObjectHasProp)(window,n.RB_PAGELOAD_ID_GLOBAL)&&c(a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayAdServer=void 0,t.setDisplayAdServer=function(e){switch(e){case"appnexus":t.displayAdServer=n.displayAdServerAppNexus;break;case"googletag":t.displayAdServer=o.displayAdServerGoogletag;break;case"sas":t.displayAdServer=a.displayAdServerSAS;break;default:t.displayAdServer=i.displayAdServerDefault}};var n=r(25),o=r(13),i=r(26),a=r(27);t.displayAdServer=i.displayAdServerDefault},,,,,,function(e,t,r){e.exports=r(22)},function(e,t,r){"use strict";var Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe=r(8),Ke=r(3),Xe=r(6),Qe=r(0),Ve=r(10),Ye=r(4),We=r(1),Je=r(9),$e=r(23),Ze=r(5),et=r(2),tt=r(7),rt=r(13),nt=r(14),n=r(24),ot=r(15),it=r(28);function at(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}try{var o=(0,n.isApstagLibrary)(window.apstag);o?(0,et.reportError)(new Error("apstag has already loaded - preventing duplicate load"),"__error-apstag_duplicate_load__",!0):((0,n.hasApstagJsLoaded)(window)&&(0,et.reportError)(new Error("apstag was loaded and then destroyed"),"__error-apstag-destroyed-reloaded__",!0),window[We.APSTAG_LOADED_VARIABLE]=!0,function(){var n=(0,Je.getWindowPerformanceMetric)(window,"navigationStart"),a=(0,nt.getPageLoadID)(),e="ls",t=(0,Ye.isDebugEnabled)("console")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=1")&&(e="url",!0)}catch(e){return!1}}(),r=(0,Ye.isDebugEnabled)("console_v2")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=2")&&(e="url",!0)}catch(e){return!1}}();function o(e){e.ts=Date.now(),Ke.store.dispatch({type:"LOG_EVENT",event:e})}function i(e){function t(e){if(!Ke.store.getState().cmpFired){Ke.store.dispatch({type:"CMP_FIRED"});var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t)}}document.readyState&&"loading"===document.readyState?document.addEventListener?document.addEventListener("DOMContentLoaded",function(){t(e)},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&t(e)}):t(e)}function s(e){try{var t=Ke.store.getState().cfg.COOKIE_MATCH_DELAY;setTimeout(function(){try{e&&e.cmp&&""!==e.cmp&&void 0!==e.cmp?i(e.cmp):e&&e.cmpjs&&""!==e.cmpjs&&void 0!==e.cmpjs&&(0,tt.loadScriptTag)(e.cmpjs)}catch(e){(0,et.reportError)(e,"__error-tryCookieMatch-1__")}},t)}catch(e){(0,et.reportError)(e,"__error-tryCookieMatch-2__")}}function c(e){return!Ke.store.getState().experiments.chunkRequests||0===Ke.store.getState().bidReqs[e.split("-")[0]].networkReqs.filter(function(e){return e.inFlight}).length}function u(e,t){!Ke.store.getState().bidReqs[e[0]].hasCallbackExecuted&&c(e[0])&&(Ke.store.dispatch({type:"RECORD_CALLBACK",fid:e[0]}),t())}function d(e){Ke.store.getState().experiments.chunkRequests&&Ke.store.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:e[0],timestamp:Date.now(),exchangeType:"response",networkID:e[1]})}function l(r,n,e){var o=e.split("-"),t={url:r,withCredentials:!0};try{t.onload=function(e){d(o);var t=e.responseText;(0,nt.isRenderBiddingGetBidsRequest)(r)&&(t=(0,nt.injectCBForGetBids)(r,t)),eval(t),u(o,n)},t.onerror=function(){d(o),u(o,n)},(0,tt.xhrGet)(t)}catch(e){(0,et.reportError)(e,"__error-xhrBid__",!0),d(o),u(o,n)}}function f(e){var t=new Date;return t.setTime(t.getTime()+1e3*e),t.toGMTString()}function p(e){if(e[We.AAX_RESP_REMAP_COOKIE_KEY])try{e[We.AAX_RESP_REMAP_COOKIE_KEY].forEach(function(e){document.cookie=e.k+"="+e.v+";expires="+(-1!==e.exp?f(e.exp):(0,Qe.getUTCStringForDate)(365))+";path=/;"})}catch(e){(0,et.reportError)(e,"__error-setFirstPartyCookies__")}}function g(e){if((0,Qe.safeObjectHasProp)(e,"cb")){Ke.store.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.cb,key:"resTs",value:Date.now()});var t=new RegExp("e/dtb/bid.*cb="+e.cb);Ke.store.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.cb,key:"perf",value:(0,Je.getResourcePerformanceObject)(window,t)})}(0,Qe.safeObjectHasProp)(e,"cfg")&&Ke.store.dispatch({type:"SET_CFG",cfg:e.cfg}),Y(e)}function m(e){if(s(e),p(e),(0,Qe.safeObjectHasProp)(e,"cfg")&&localStorage.setItem(We.CFG_LOCAL_STORAGE_KEY,JSON.stringify(e.cfg)),(0,Qe.safeObjectHasProp)(e,"st")&&e.st.includes(917)&&Ke.store.getState().sync917){Ke.store.dispatch({type:"SET_SYNC_917",value:!1});try{L()}catch(e){(0,et.reportError)(e,"__error-doFbSync__")}}_(e),(0,Xe.isAAXPunt)(e)||(0,Ze.sendPixels)()}function _(e){if((0,Qe.safeObjectHasProp)(e,"fp")){var t=e.fp;(0,Qe.safeObjectHasProp)(t,"length")&&t.forEach(function(e){var t=e.d?e.d:0;setTimeout(function(){(0,Ze.sendPixel)(e.s)},t)})}}function S(){Ke.store.getState().Q.forEach(function(e){"i"===e[0]?window.apstag.init.apply(null,e[1]):window.apstag.fetchBids.apply(null,e[1])})}function b(e){var t=Ke.store.getState().config;return(0,Qe.safeObjectHasProp)(t,"pubID")&&(0,Qe.safeObjectHasProp)(e,"pubID")&&t.pubID!==e.pubID&&(0,et.reportError)(new Error("`apstag.init` was called multiple times with different pubIDs ("+t.pubID+" then "+e.pubID+")"),"__error-init-multiple-calls__",!0),Ke.store.dispatch({type:"SET_GDPR_CONFIG",config:null}),Ke.store.dispatch({type:"SET_CONFIG",config:e,defaultCmpTimeout:Ke.store.getState().cfg.GDPR_CMP_TIMEOUT}),"success"}function y(e){var t=e.slotID;(0,Qe.safeObjectHasProp)(e,"mediaType")&&"video"===e.mediaType||ot.displayAdServer.hasAdServerObjectLoaded()&&ot.displayAdServer.isCommandQueueDefined()&&(ot.displayAdServer.hasAdServerObjectLoaded()?h(t)&&R(e):ot.displayAdServer.cmdQueuePush(function(){y(e)}))}function h(e){var t;try{t=(0,Ve.getDisplayAdServerSlots)(ot.displayAdServer).filter(function(t){return ot.displayAdServer.getSlotElementId(t)===e})[0]}catch(t){(0,et.reportError)(t,"__error-getAdServerSlot__")}return t}function v(e){try{var t=Ke.store.getState().targetingKeys[e];if(ot.displayAdServer.hasAdServerObjectLoaded()&&(0,Qe.isArray)(t)){var r=h(e);t.forEach(function(e){0<ot.displayAdServer.getTargeting(e,r).length&&ot.displayAdServer.clearTargeting(e,r)})}}catch(e){(0,et.reportError)(e,"__error-clearTargetingFromSlot__")}}function E(e){try{if((0,Qe.safeObjectHasProp)(Ke.store.getState().slotBids,e)){var t=Ke.store.getState().slotBids[e].filter(function(e){return e.bidState===We.BID_STATES.set})[0];t&&t.bidState===We.BID_STATES.set&&Ke.store.dispatch({type:"BID_STATE_CHANGE",slotID:e,_targetingSetID:t._targetingSetID,bidState:We.BID_STATES.exposed})}}catch(e){(0,et.reportError)(e,"__error-clearbidSetOnSlot__")}}function O(e,t){return e.map(function(e){return(0,Qe.inArray)(t,e)}).filter(function(e){return e}).length===e.length}function D(){var e={};try{Object.keys(Ke.store.getState().slotBids).forEach(function(t){var r=Ke.store.getState().slotBids[t].filter(it.isBidEligible);0<r.length&&(e[t]=r.map(function(e){var t=Ke.store.getState().AAXReqs.filter(function(t){return t.bidReqID===e.bidReqID})[0].rqTs;return qe({},e,{rqTs:t})}).reduce(function(e,t){return e.rqTs>t.rqTs?e:t}))})}catch(e){(0,et.reportError)(e,"__error-getCurrentSlotBids__")}return e}function A(e,t){return(0,Qe.isArray)(Ke.store.getState().targetingKeys[e])?t?["amzniid_sp"]:Ke.store.getState().targetingKeys[e].filter(function(e){return-1<e.indexOf("amzniid")&&e.indexOf("amzniid_sp")<0}):["amzniid"]}function I(e,t){var r,n;try{var o=Ke.store.getState().slotBids;Object.keys(o).forEach(function(i){o[i].forEach(function(o){A(i,t).forEach(function(t){o[t]===e&&(r=o,"amzniid_sp"===t?n="sp":"amzniid"!==t&&(n=t.substr(0,t.indexOf("amzniid"))))})})})}catch(e){(0,et.reportError)(e,"__error-findSlotBidByBidID__",!0)}return{slotBid:r,dealId:n}}function T(e,t,r){var n;return t[r+"amzniid"]===e&&(n=r.split("_").pop().trim()),n}function w(e){var t={};return e.slots.forEach(function(e){"video"!==e.mediaType?t[e.slotID]=e:(0<=e.slotID.indexOf("rsv-")&&(e={slotID:e.slotID.substring(4),r_amznbid:e.amznbid,r_amzniid:e.amzniid,r_amznp:e.amznp,mediaType:"video",targeting:["r_amznbid","r_amzniid","r_amznp"]}),t[e.slotID]?(e.targeting=e.targeting.concat(t[e.slotID].targeting),t[e.slotID]=qe({},t[e.slotID],e)):t[e.slotID]=e)}),Object.keys(t).map(function(e){return t[e]})}function P(e){var t,r=w(e),n=["host","ev","cb","cmp","cfe"];try{t=r.map(function(t){var r={bidState:We.BID_STATES.new,_targetingSetID:(0,Qe.getRand)()};return(0,Qe.safeObjectHasProp)(t,"amznsz")||(r.amznsz=t.size),n.forEach(function(t){if((0,Qe.safeObjectHasProp)(e,t)){var n=e[t],o=t;"cb"===t&&(o="bidReqID"),r[o]=n}}),qe({},t,r)})}catch(t){(0,et.reportError)(t,"__error-convertAAXResponse__")}return t}function R(e){try{var t,r=e.slotID,n=e._targetingSetID,o=e.targeting?e.targeting:He("display");if(e.bidState===We.BID_STATES.set)return;(t=h(r))&&(E(r),Object.keys(e).filter(function(e){return(0,Qe.inArray)(o,e)}).forEach(function(r){return ot.displayAdServer.setTargeting(r,e[r],t)}),Ke.store.dispatch({type:"BID_STATE_CHANGE",slotID:r,_targetingSetID:n,bidState:We.BID_STATES.set,ts:Date.now()}))}catch(r){(0,et.reportError)(r,"__error-applyTargetingToAdServerSlot__")}}function z(e){var t=D();e.forEach(function(e){t[e]&&y(t[e])})}function C(){var e=D();Object.keys(e).forEach(function(t){y(e[t])})}function j(e){try{e?z(e):C(),Ke.store.getState().displayAdServer.slotRenderEndedSet||(ot.displayAdServer.cmdQueuePush(function(){ot.displayAdServer.slotRenderEndedEvent(function(e){v(ot.displayAdServer.getSlotElementId(e.slot)),E(ot.displayAdServer.getSlotElementId(e.slot))})}),Ke.store.dispatch({type:"SLOT_RENDER_ENDED_SET"}))}catch(e){(0,et.reportError)(e,"__error-applySlotTargeting__",!0)}}function L(){var e=197,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="1881141382166183",n="https://www.facebook.com/audiencenetwork/token/update";function o(e){var t=JSON.parse(e),r=t.fbToken,n=new Date(parseInt(t.expAfter,10)).toUTCString();document.cookie="aps_ext_917="+r+"; expires="+n}function i(r){!function(e,t,r){!function(e,t){var r={url:e,withCredentials:!0};try{r.onload=function(e){t(e.responseText)},r.onerror=function(){},(0,tt.xhrGet)(r)}catch(e){(0,et.reportError)(e,"__error-fbTokenRequest__")}}(function(e,t){return n+"?partner="+encodeURIComponent(e)+"&vr_token="+encodeURIComponent(t)}(e,t),r)}(r,function(){for(var r="VR_",n=0;n<e;++n)r+=t.charAt(Math.floor(Math.random()*t.length));return r}(),o)}"complete"===document.readyState?i(r):window.addEventListener("load",function(){i(r)})}function B(e,t){function r(){if(!n)if(20<=o++)(0,et.reportError)({name:"LoopError",message:"Too many attempts to append to document.body"},"__error-safeDocumentBodyAppendChild-loops__",!0);else{try{if(e&&e.body&&null!==e.body&&"function"==typeof e.body.appendChild)return e.body.appendChild(t),void(n=!0)}catch(e){(0,et.reportError)(e,"__error-safeDocumentBodyAppendChild-callback__")}setTimeout(r,100)}}var n=!1,o=0;try{"complete"===e.readyState||"interactive"===e.readyState?r():e.addEventListener?e.addEventListener("DOMContentLoaded",r):e.attachEvent("onreadystatechange",function(){"complete"!==e.readyState&&"interactive"!==e.readyState||r()})}catch(e){(0,et.reportError)(e,"__error-safeDocumentBodyAppendChild-outer__")}}function x(e){var t,r;return t=""+e.host+Ke.store.getState().cfg.DTB_PATH+"/imp",r=""+e.host+Ke.store.getState().cfg.DTB_PATH+"/adm",e.cfe||e.isAmp?r:t}function N(e){var t,r="?b="+e.bidID+"&rnd="+(0,Qe.getRand)();return(0,Qe.safeObjectHasProp)(e,"pp")&&(r+="&pp="+e.pp),(0,Qe.safeObjectHasProp)(e,"amznp")&&(r+="&p="+e.amznp),(0,Qe.safeObjectHasProp)(e,"crID")&&(r+="&crid="+e.crID),(0,Qe.safeObjectHasProp)(e,"isSharedPMP")&&!0===e.isSharedPMP&&(r+="&sp=true"),t=x(e),"1"===e.fif?t+"j"+r:t+"i"+r}function H(e){var t=e.doc.createElement("iframe");return t.frameBorder=0,t.marginHeight=0,t.marginWidth=0,t.topMargin=0,t.leftMargin=0,t.scrolling="no",t.allowTransparency=!0,t.width=e.sizes[0]+"px",t.height=e.sizes[1]+"px",t}function M(e){var t;try{if((0,Qe.safeObjectHasProp)(e,"bidType")){var r=e.kvMap;switch(e.bidType){case"sharedPMP":t={bidID:r.amzniid_sp[0],pp:r.amznbid_sp[0],sizes:r.amznsz_sp[0].split("x"),amznp:r.amznp_sp[0],isSharedPMP:e.isSharedPMP};break;case"preferredPMP":var n=e.amzndeal.split("_").pop().trim();t={bidID:r[e.amzndeal+"amzniid"][0],sizes:De(n)};break;case"openAuction":t=(0,Qe.safeObjectHasProp)(e,"kvMap")?{bidID:r.amzniid[0],pp:(0,Xe.getAmpAmznBidValue)(r.amznbid[0]),amznp:r.amznp[0],sizes:r.amznsz[0].split("x")}:{bidID:e.amzniid,pp:(0,Xe.getAmpAmznBidValue)(e.amznbid),amznp:e.amznp,sizes:e.amznsz.split("x")};break;default:try{(0,et.reportError)({name:"Invalid AMP Bid Type: "+e.bidType,message:"No valid AMP bid type"},"__error-ampBidAuctionTypeSelectionDefaultBlock__")}catch(e){(0,et.reportError)(e,"__error-ampBidAuctionSwitchStatement__")}}}}catch(e){(0,et.reportError)(e,"__error-getAmpAdData__")}return t}function G(e,t){try{var r={},n={},o={};if((0,Qe.safeObjectHasProp)(t,"ampEnv")&&t.ampEnv&&(r=t,(0,Qe.safeObjectHasProp)(t,"bidType")&&"sharedPMP"===t.bidType?r.isSharedPMP=!0:r.isSharedPMP=!1,r.document=e),Ee(e)&&((r=e).bidType="openAuction",r.ampEnv=!0),(0,Qe.safeObjectHasProp)(r,"kvMap")&&(r.amznhost=t.kvMap.amznhost[0]),n=M(r),(0,Qe.safeObjectHasProp)(r,"kvMap")&&(0,Qe.safeObjectHasProp)(r.kvMap,"amzncsmparams")&&r.kvMap.amzncsmparams[0]&&(o.amznCsmParams=JSON.parse(decodeURIComponent(r.kvMap.amzncsmparams[0])),Pe(o)),n.doc=r.document,n.host=r.amznhost.replace("http://","https://"),n.adID="amznad"+(0,Qe.getRand)(),n.isAmp=r.ampEnv,n.isSf=(0,$e.isSafeFrame)(window),Ke.store.getState().amznCsmParams.ev)return void Te(n,n.doc);U(n)}catch(e){(0,et.reportError)(e,"__error-renderAmpImpression__")}}function k(e){try{var t=H(e=qe({hasRendered:!1,hasStartedRender:!1},e));t.id="apstag-f-iframe-"+(0,Qe.getRand)(),t.setAttribute("srcdoc",e.html),t.src='javascript: window.frameElement.getAttribute("srcdoc");',B(e.doc,t)}catch(e){(0,et.reportError)(e,"__error-loadAdIntoFriendlyIframe__",!0)}}function U(e,t){try{var r=H(e),n={};if(r.id=e.adID,r.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation",(0,Ye.isDebugEnabled)("fake_bids")){var o='<body style="background-color: #FF9900;">'+(50<e.sizes[1]?"<h3>apstag Test Creative</h3>":"")+"<h4>amzniid - "+e.bidID+" | amznbid: "+e.pp+" | size: "+e.sizes.join("x")+"</h4></body>";r.src="javascript:'"+o+"'"}else r.src=N(e);e.isAmp?(n.doc=e.doc,n.amzniid=e.bidID,n.slotID="amp",e.isSf&&(0,$e.is1x1Creative)(window)&&(0,$e.expandSf)(e.sizes,window)):(n=I(e.bidID,e.isSharedPMP).slotBid).doc=e.doc,B(e.doc,r),e.viewabilityParams=e.viewabilityParams||{states:{}},(e.viewabilityParams.iframe=r).onload=function(){e.viewabilityParams.states.iframeLoaded=!0,t&&t()}}catch(e){(0,et.reportError)(e,"__error-loadAdIntoUnfriendlyIframe__",!0)}}function q(e,t){var r,n=e.states,o=e.doc,i=e.bidID,a=e.iframe;be(n)||(n.shouldRunViewability=!1,(0,Qe.safeObjectHasProp)(window,"amzncsm")?r=window.amzncsm:(0,Qe.safeObjectHasProp)(o.defaultView,"amzncsm")&&(r=o.defaultView.amzncsm),r&&(0,Qe.safeObjectHasProp)(r,"rmD")&&(r.host=(0,Ye.getDebugValue)("host",Ke.store.getState().hosts.DEFAULT_AAX_PIXEL_HOST),r.rmD(a,i,o.defaultView,o,null,t)))}function F(e,t){return function(r){var n=(0,it.getNewSlotBidsAndExposeForRequestedSlots)(t.slots),o=Object.keys(n),i=[];r&&(Ke.store.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.bidReqID,key:"timedOutAt",value:Date.now()}),Ke.store.getState().experiments.chunkRequests&&Ke.store.dispatch({type:"RECORD_TIMEOUT",fid:t.bidReqID,timeOut:Date.now()})),o.forEach(function(e){if((0,Qe.safeObjectHasProp)(n,e)){var t=n[e],r={};if((0,it.isNewBidObjectRequired)(Ke.store.getState(),ot.displayAdServer))t.meta.forEach(function(e){r[e]=t[e]}),r.targeting={},t.targeting.forEach(function(e){r.targeting[e]=t[e]}),r.helpers={targetingKeys:t.targeting,qsParams:it.createBidQsParams.bind(null,t,!1),encodedQsParams:it.createBidQsParams.bind(null,t,!0)};else if((0,Qe.safeObjectHasProp)(t,"amznbid")){if((0,Qe.safeObjectHasProp)(t,"amznp")||(t.amznp=""),r={amzniid:t.amzniid,amznbid:t.amznbid,amznp:t.amznp,slotID:e},(0,Qe.safeObjectHasProp)(t,"size")&&(r.size=t.size,r.amznsz=t.amznsz),"video"===t.mediaType){r.mediaType="video";var o="";t.amznbid?o+="&amzniid="+t.amzniid+"&amznbid="+t.amznbid+"&amznp="+t.amznp:(r.amznbid="",r.amzniid=""),t.r_amznbid?(r.r_amznbid=t.r_amznbid,r.r_amzniid=t.r_amzniid,r.r_amznp=t.r_amznp,o+="&r_amzniid="+t.r_amzniid+"&r_amznbid="+t.r_amznbid+"&r_amznp="+t.r_amznp):(r.r_amznbid="",r.r_amzniid="",r.r_amznp=""),r.qsParams=o,r.encodedQsParams=encodeURIComponent(o)}}else r=(0,it.createPublicStateTrackingBidObject)(t.slotID,We.SLOT_STATES.noBid);i.push(r)}}),ot.displayAdServer.isSupported&&(i=(0,it.addStateTrackingBidsToRealBids)(i,t,r)),ot.displayAdServer.appendTargeting(i),e(i,{fromTimeout:r})}}function K(e,t){try{var r;(r=e.defaultView&&e.defaultView.frameElement?e.defaultView.frameElement:window.frameElement).width=t[0],r.height=t[1]}catch(e){(0,et.reportError)(e,"__error-resizeIframe__")}}function X(e){return e[0]+"x"+e[1]}function Q(e){return 1===e.length?X(e[0]):X(e[Math.floor(e.length*Math.random())])}function V(e,t){var r,n=(0,Ye.getDebugValue)("host",Ke.store.getState().hosts.DEFAULT_AAX_BID_HOST),o=(0,Xe.getCurrentUrl)(window),i=e.bidReqID,a=(0,Qe.getWindowDimensions)(window),s=(0,Ye.getDebugValue)("testBidTimeout",200);Ke.store.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:e,timeout:s,bidReqID:i,ws:a,url:o,rqTs:Date.now()}}),r=e.slots.map(function(e){var t={slotID:e.slotID,amzniid:We.MOCKBID.amzniid+"-"+(0,Qe.getRand)(),amznbid:We.MOCKBID.amznbid,amznp:We.MOCKBID.amznp,crid:We.MOCKBID.crid+"-"+(0,Qe.getRand)()};if((0,Qe.safeObjectHasProp)(e,"sizes")){var r=Q(e.sizes);t.size=r,t.amznsz=r}else"video"===e.mediaType&&(t.mediaType="video",t.amznbid="v_"+t.amznbid);if((0,it.isNewBidObjectRequired)(Ke.store.getState(),ot.displayAdServer)){t.mediaType="banner",t.meta=["slotID","mediaType","size"],t.amznbid_sp=We.MOCKBID.amznbid+"SP",t.amznp_sp=We.MOCKBID.amznp+"SP",t.amznsz_sp=t.size;var n="testDeal"+(0,Qe.getRand)()+"_"+t.size,o="testDealImpression-"+(0,Qe.getRand)();t.amzndeal_sp=n,t.amzndeals=[n],t[n+"amzniid"]=o,t.amzniid_sp=o,t.targeting=["amzniid","amznbid","amznp","amznsz","amzniid_sp","amznbid_sp","amznp_sp","amznsz_sp","amzndeal_sp","amzndeals",n+"amzniid"]}return t}),setTimeout(function(){window.apstag.bids({slots:r,host:n,status:"ok",cb:i}),t(!0)},s)}function Y(e){var t=Ke.store.getState().AAXReqs.filter(function(t){return t.bidReqID===e.cb})[0];if(t&&t.bidConfig&&t.bidConfig.slots){var r=t.bidConfig.slots.filter(Ve.isDisplaySlot).map(function(e){return e.slotID}),n=(0,Qe.safeObjectHasProp)(e,"slots")?e.slots.map(function(e){return e.slotID}):[],o=r.filter(function(e){return!(0,Qe.inArray)(n,e)});Ke.store.dispatch({type:"NO_BID_ON_ADSERVER_SLOTS",slotIDs:o}),ot.displayAdServer.hasAdServerObjectLoaded()?$():ot.displayAdServer.isCommandQueueDefined()&&ot.displayAdServer.cmdQueuePush(function(){$()})}}function W(e){return(0,Qe.inArray)(Ke.store.getState().AAXReqs.filter(function(e){return!e.resTs}).map(function(e){return e.bidConfig.slots}).reduce(function(e,t){return e.concat(t)},[]).map(Ve.getSlotID),e)}function J(e){var t=ot.displayAdServer.getTargeting("amznbid",e);return 0<t.length&&2<t[0].length}function $(){ot.displayAdServer.hasAdServerObjectLoaded()&&"1"===ot.displayAdServer.getTargeting("amznbid")[0]&&ee(),(0,Ve.getDisplayAdServerSlots)(ot.displayAdServer).forEach(function(e){!(0,Qe.inArray)(Ke.store.getState().displayAdServer.noBidSlotIDs,ot.displayAdServer.getSlotElementId(e))||W(ot.displayAdServer.getSlotElementId(e))||J(e)||"2"===ot.displayAdServer.getTargeting("amznbid",e)[0]||Z("noBid",e)})}function Z(e,t){We.SLOT_STATE_KEYS.forEach(function(r){return ot.displayAdServer.setTargeting(r,We.SLOT_STATES[e],t)})}function ee(){We.SLOT_STATE_KEYS.forEach(function(e){return ot.displayAdServer.clearTargeting(e)})}function te(e){var t={_type:"dupePixel",dd:Date.now()-e.renderTime};(0,Ze.bidCacheIdPixel)(e.amzniid,t)}function re(){var e=(0,Je.getResourcePerformanceObject)(window,new RegExp("aax2/apstag.js")),t={pid:a,ns:n,fs:(0,Je.getMetricFromPerformanceObject)(e,"fetchStart"),re:(0,Je.getMetricFromPerformanceObject)(e,"responseEnd")},r=(0,Je.isResourceCached)(e);null!==r&&(t.c=r?1:0),setTimeout(Ze.noBidCacheIdPixel,1e3,t)}!function(){if((0,Qe.hasLocalStorage)()){var e=localStorage.getItem(We.CFG_LOCAL_STORAGE_KEY);if(e&&"undefined"!==e){var t=JSON.parse(e);Ke.store.dispatch({type:"SET_CFG",cfg:t})}}}();var ne=0,oe;function ie(){(0,Qe.safeObjectHasProp)(window,"googletag")&&(0,Qe.safeObjectHasProp)(window.googletag,"cmd")?rt.displayAdServerGoogletag.cmdQueuePush(function(){window.googletag.pubads().addEventListener("slotRequested",function(e){try{var t=e.slot;Ke.store.dispatch({type:"LOG_GAM_EVENT",event:qe({},(0,rt.constructApsSlotObject)(t,!1),{ts:Date.now(),targeting:t.getTargetingMap()})})}catch(e){(0,et.reportError)(e,"__error-latency-parse-event__")}})}):++ne<5&&setTimeout(ie,100)}function ae(e){var t=e.AAXReqs.slice(e.gamSlotRenderPixel.aaxReqOffset).reduce(function(e,t){return e.concat(t.bidConfig.slots)},[]).map(function(e){return qe({},e,{type:"a"})}).filter(function(e){return"video"!==e.mediaType}),r=e.gamSlotFetchLog.slice(e.gamSlotRenderPixel.gamSlotFetchLogOffset).map(function(e){return qe({},e,{type:"g"})}),n=[].concat(t).concat(r).reduce(function(e,t){return(0,Qe.safeObjectHasProp)(e,t.slotID)||(e[t.slotID]={sd:t.slotID,a:{c:0},g:{c:0}}),e[t.slotID][t.type].c++,e[t.slotID][t.type].s=t.sizes,e[t.slotID][t.type].sn=t.slotName||"",e},{});return Object.keys(n).map(function(e){return n[e]}).filter(function(e){return 0!==e.a.c||0!==e.g.c})}function se(){var e=Ke.store.getState(),t=ae(e);0<Object.keys(t).length&&((0,Qe.chunkArray)(t,5).forEach(function(t){(0,Ze.noBidCacheIdPixel)({slots:t,pid:a,url:(0,Xe.getCurrentUrl)(window).split("?")[0],ws:(0,Qe.getWindowDimensions)(window),pubid:e.config.pubID,_type:"slotRenders"})}),Ke.store.dispatch({type:"UPDATE_RENDER_OFFSETS",offsets:{aaxReqOffset:e.AAXReqs.length,gamSlotFetchLogOffset:e.gamSlotFetchLog.length}}))}function ce(){setInterval(function(){se()},5e3)}function ue(){try{setTimeout(function(){var e=pe().filter(function(e){return!(0,Qe.safeObjectHasProp)(Ke.store.getState().bsPixels,e.iid)||e.state!==Ke.store.getState().bsPixels[e.iid]});e&&e.length&&0<e.length&&(e.forEach(function(e){var t=e.iid,r=at(e,["iid"]);(0,Ze.bidCacheIdPixel)(t,le(r))}),de(e));var t={fetchStart:"a",domainLookupStart:"b",domainLookupEnd:"c",connectStart:"d",secureConnectionStart:"e",connectEnd:"f",requestStart:"g",responseStart:"h",responseEnd:"i",resTs:"j"};Object.keys(Ke.store.getState().slotBids).forEach(function(e){Ke.store.getState().slotBids[e].filter(function(e){return void 0!==e.amzniid}).forEach(function(r){if(!r.pixelSent){var n=Ke.store.getState().AAXReqs.filter(function(e){return e.bidReqID===r.bidReqID})[0];if("object"===(void 0===n?"undefined":Ue(n))&&null!==n){var o=n.rqTs-(0,Je.getTimeOrigin)(),i={pid:a,lv:We.LIBRARY_VERSION,ns:n.bidConfig.slots.length,fid:r.bidReqID,fbrq:n.rqTs,_type:"latencyBd"};"object"===Ue(n.perf)&&null!==n.perf&&Object.keys(t).forEach(function(e){0!==(0,Je.getMetricFromPerformanceObject)(n.perf,e)&&(i[t[e]]=(0,Je.getMetricFromPerformanceObject)(n.perf,e)-o)}),i[t.resTs]=n.resTs-n.rqTs,(0,Ze.bidCacheIdPixel)(r.amzniid,i),Ke.store.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:e,iid:r.amzniid,key:"pixelSent",value:!0})}}})}),ue()},5e3)}catch(e){(0,et.reportError)(e,"__error-bidSetPixel__")}}function de(e){e.forEach(function(e){return Ke.store.dispatch({type:"RECORD_BID_INFO_SENT",bidInfo:e})})}function le(e){var t={};try{var r=fe(e.fid);(t={status:e.state,pubid:Ke.store.getState().config.pubID,lv:We.LIBRARY_VERSION,_type:"bidSetPixel"}).toa=(0,Qe.safeObjectHasProp)(r.req,"timedOutAt")?r.req.timedOutAt:"0",t.fbrq=r.req.rqTs,t.pto=r.req.timeout,t.ns=r.req.bidConfig.slots.length,t.bla=r.req.resTs-r.req.rqTs,t.reqindex=r.index,t.fid=e.fid,Ke.store.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION&&(t.eid=Ke.store.getState().experiments.chunkRequests?2:1,t.fbindex=r.fbIndex,t.fbns=Ke.store.getState().bidConfigs[e.fid.split("-")[0]].slots.length),e.delta&&(t.delay=e.delta);try{var n=r.req.perf;void 0!==n&&(t.ul=r.req.urlLength,t.es=(0,Je.getMetricFromPerformanceObject)(n,"encodedBodySize"))}catch(e){(0,et.reportError)(e,"__error-mapBidInfoToPixel-size__")}}catch(e){(0,et.reportError)(e,"__error-mapBidInfoToPixel__")}return t}function fe(e){var t={req:Ke.store.getState().AAXReqs.filter(function(t){return t.bidReqID===e})[0]};return t.index=Ke.store.getState().AAXReqs.indexOf(t.req)+1,Ke.store.getState().experiments.chunkRequests?t.fbIndex=Ke.store.getState().AAXReqs.filter(function(e){return-1===e.bidReqID.indexOf("-")||"0"===e.bidReqID.split("-")[1]}).map(function(e){return e.bidReqID.split("-")[0]}).indexOf(e.split("-")[0])+1:t.fbIndex=t.index,t}function pe(){var e=Se(),t=[];return e&&Object.keys(Ke.store.getState().slotBids).forEach(function(r){"video"!==Ke.store.getState().slotBids[r][0].mediaType&&Ke.store.getState().slotBids[r].filter(function(e){return void 0!==e.amzniid}).forEach(function(n){var o={slotID:r,iid:n.amzniid,fid:n.bidReqID},i=[],a=[];if(r in e&&(i=e[r].fetchedAt.filter(function(e){return e.AAXReqInfo&&e.AAXReqInfo.bidReqID===n.bidReqID}),a=e[r].targetedAt.filter(function(e){return e.targeting===n.amzniid})),0<i.length?0<i.length&&a.length>=i.length&&i.slice(i.length-1)[0].ts>a.slice(i.length-1)[0].ts?1===e[r].fetchWithIID.filter(function(e){return e===n.amzniid}).length?o.state=1:o.state=4:-1!==e[r].fetchWithIID.indexOf(n.amzniid)?o.state=3:o.state=2:o.state=0,1===o.state||2===o.state){var s=Ke.store.getState().AAXReqs.filter(function(e){return e.bidReqID===n.bidReqID})[0].resTs,c=ge(s,e[r].fetchedAt,2===o.state);c&&(0,Qe.safeObjectHasProp)(c,"ts")&&(o.delta=s-c.ts)}t.push(o)})}),t}function ge(e,t,r){var n=t.map(function(t){var n=e-t.ts;return r?0<=n?n:null:n<=0?-n:null});return t[me(n)]}function me(e){for(var t,r,n,o=0;o<e.length;o++)"number"==typeof(t=e[o])&&("number"!=typeof n||t<r)&&(n=o,r=t);return n}function _e(e,t){return Ke.store.getState().AAXReqs.filter(function(e){return-1<e.bidConfig.slots.map(function(e){return e.slotID}).indexOf(t)})[e]}function Se(){if(!ot.displayAdServer.hasAdServerObjectLoaded())return null;var e=Ke.store.getState().gamSlotFetchLog.reduce(function(e,t){(0,Qe.safeObjectHasProp)(e,t.slotID)||(e[t.slotID]={fetchedAt:[],targetedAt:[]});var r=e[t.slotID];return r.fetchedAt.push({ts:t.ts,AAXReqInfo:_e(r.fetchedAt.length,t.slotID)}),(0,Qe.safeObjectHasProp)(t.targeting,"amzniid")&&(0,Qe.safeObjectHasProp)(t.targeting.amzniid,0)?r.targetedAt.push({ts:t.ts-1,targeting:t.targeting.amzniid[0]}):r.targetedAt.push({ts:t.ts-1,targeting:""}),e},{});return Object.keys(e).forEach(function(t){var r=e[t];r.fetchWithIID=r.fetchedAt.map(function(e){var t=ge(e.ts,r.targetedAt,!0);return t?t.targeting:0}),e[t]=r}),e}function be(e){var t=Object.keys(e);return t.map(function(t){return e[t]}).filter(function(e){return e}).length===t.length}function ye(){ot.displayAdServer.hasAdServerObjectLoaded()?Z("noRequest"):ot.displayAdServer.isCommandQueueDefined()&&ot.displayAdServer.cmdQueuePush(function(){Z("noRequest")})}function he(e){ot.displayAdServer.isCommandQueueDefined()&&(Ke.store.dispatch({type:"REQUESTED_BID_FOR_ADSERVER_SLOTS",slotIDs:e}),Ke.store.dispatch({type:"REQUESTED_BID_FOR_PMP_ONLY_DFP_SLOTS",slotIDs:e}),ot.displayAdServer.cmdQueuePush(function(){var t=(0,Ve.getDisplayAdServerSlots)(ot.displayAdServer);"0"===ot.displayAdServer.getTargeting("amznbid")[0]&&ee(),O(e,t.map(function(e){return ot.displayAdServer.getSlotElementId(e)}))?t.forEach(function(t){(0,Qe.inArray)(e,ot.displayAdServer.getSlotElementId(t))&&!J(t)&&Z("bidInFlight",t)}):ot.displayAdServer.cmdQueuePush(function(){Z("bidInFlight")})}))}function ve(){return window.AMP_CONTEXT_DATA&&"AMP-AD"===window.AMP_CONTEXT_DATA.tagName}function Ee(e){return(0,Qe.safeObjectHasProp)(e,"type")&&"amp"===e.type&&!(e instanceof Document)}function Oe(e,t){return(0,Qe.safeObjectHasProp)(t,"ampEnv")&&t.ampEnv||Ee(e)}function De(e){return e.split("x").map(function(e){return parseInt(e,10)})}function Ae(e,t,r){try{(0,Ze.sendPixels)()}catch(e){(0,et.reportError)(e,"__sendPixels-renderImp__")}if(Oe(e,r)&&ve())G(e,r);else{var n=!1;t&&"string"==typeof t&&0===t.indexOf("sp|")&&(t=t.substring(3),n=!0);var o,i=t||e.amzniid,a=I(i,n),s=a.slotBid,c=a.dealId;if(o=c&&1<=c.length?De("sp"===c?s.amznsz_sp:T(i,s,c)):De(s.size),1!==arguments.length)if(s){s.bidState===We.BID_STATES.rendered&&te(s),Ke.store.dispatch({type:"BID_STATE_CHANGE",slotID:s.slotID,_targetingSetID:s._targetingSetID,bidState:We.BID_STATES.rendered,dealId:c,ts:Date.now()});var u=s.host,d="amznad"+Math.round(1e6*Math.random()),l={bidID:t,doc:e,pp:Ie("amznbid",s,c),host:u,adID:d,sizes:o,amznp:Ie("amznp",s,c),crID:Ie("crid",s,c),fif:!1,dealId:c,isSharedPMP:n,cfe:s.cfe};"1"===s.fif?(l.fif="1",Ke.store.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:s.slotID,iid:t,key:"doc",value:e,dealId:c}),(0,tt.loadScriptTag)(N(l),null,document)):Ke.store.getState().amznCsmParams.ev?Te(l,e):U(l),K(e,o)}else(0,et.reportError)(new Error("Invalid bid ID tried to render"),"__error-invalid_bid_id_render__");else k({doc:s.doc,bidID:s.amzniid,sizes:o,html:e.html})}}function Ie(e,t,r){return r&&1<=r.length?"sp"===r?t[e+"_sp"]:"":t[e]?t[e]:""}function Te(e,t){var r=t.createElement("script");r.type="text/javascript",r.async=!0,e.viewabilityParams={doc:t,bidID:e.bidID,states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!0}},e.amznCsmParams=Ke.store.getState().amznCsmParams;var n=q.bind(null,e.viewabilityParams,e.amznCsmParams);(0,tt.addOnLoadFunction)(r,function(){e.viewabilityParams.states.csmLoaded=!0,n()});try{r.onerror=function(e){return(0,Ze.noBidCacheIdPixel)({_type:"csm_fail",ts:Date.now(),msg:e.message})}}catch(e){(0,et.reportError)(e,"__error-csm_onerror__")}U(e,n),r.src=e.amznCsmParams.cfn,B(t,r)}function we(e){return"//"===e.substring(0,2)?e:"//c.amazon-adsystem.com/"+e}function Pe(e){try{var t={ev:!1,cfn:Ke.store.getState().cfg.CSM_JS};(0,Qe.safeObjectHasProp)(e,"ev")&&(t.ev=e.ev),(0,Qe.safeObjectHasProp)(e,"cfn")&&(t.cfn=we(e.cfn)),(0,Qe.safeObjectHasProp)(e,"amznCsmParams")&&(t=e.amznCsmParams,(0,Qe.safeObjectHasProp)(e.amznCsmParams,"cfn")&&(t.cfn=we(e.amznCsmParams.cfn))),Ke.store.dispatch({type:"SET_AMZNCSMPARAMS",amznCsmParams:t})}catch(e){(0,et.reportError)(e,"__setCsmState__")}}function Re(e){(0,it.mapSlotIDValues)(e),g(e),(0,Qe.safeObjectHasProp)(e,"slots")&&(Ke.store.dispatch({type:"UPDATE_SLOT_BIDS",bids:P(e)}),Pe(e)),m(e)}function ze(){return"number"==typeof Ke.store.getState().cfg.MAX_SLOTS_PER_REQUEST&&0<Ke.store.getState().cfg.MAX_SLOTS_PER_REQUEST}function Ce(e,t){var r=Le.bind(null,e,t);void 0===Ke.store.getState().gdpr||null===Ke.store.getState().gdpr?(Ke.store.dispatch({type:"ADD_GDPR_QUE_ITEM",func:r}),1===Ke.store.getState().gdprQue.length&&(0,Fe.GDPR)(Ke.store.getState().config.gdpr,je)):r()}function je(e){Ke.store.dispatch({type:"SET_GDPR_CONFIG",config:e}),Ke.store.getState().gdprQue.map(function(e){try{e()}catch(e){(0,et.reportError)(e,"__gdpr_que__")}}),Ke.store.dispatch({type:"CLEAR_GDPR_QUE"})}function Le(e,t){var r=!1;!0===Ke.store.getState().config.simplerGPT&&(!(0,Qe.safeObjectHasProp)(e,"slots")||0<e.slots.length&&!(0,Qe.safeObjectHasProp)(e.slots[0],"slotID"))&&(0===(0,Ve.getDisplayAdServerSlots)(ot.displayAdServer).length?((0,et.reportError)(new Error("fetchBids was called in simplerGPT mode before any slots were defined in GPT"),!0),r=!0,e.slots=[]):(e.slots||(e.slots=(0,Ve.getDisplayAdServerSlots)(ot.displayAdServer)),e.slots=(0,rt.turnGptSlotsIntoApsSlots)(e.slots),0===e.slots.length&&((0,et.consoleWarn)(new Error("No GPT slots provided to apstag.fetchBids() had valid sizes"),!0),r=!0)));var n,o,i=(0,Ve.normalizeSlotsSizeArray)(e.slots);i&&(e.slots=i);try{n=(0,Xe.getTimeout)(e,Ke.store.getState()),"function"!=typeof t&&(void 0!==t&&(0,et.reportError)(new Error("Invalid callback function provided to apstag.fetchBids"),"__error-invalid_callback_fetchbids_",!0),t=function(){}),e.bidReqID=""+Ke.store.getState().AAXReqs.length,t=(0,Xe.executeFunctionOnceWithTimeout)(F(t,e),n)}catch(e){(0,et.reportError)(e,"__error-fetchBids__",!0)}if(0===e.slots.length)return!1===r&&(0,et.reportError)(new Error("No slots provided to apstag.fetchBids"),"__error-no_slots_provided_bid_request__",!0),void setTimeout(t.bind(null,[]),10);if(he(e.slots.filter(Ve.isDisplaySlot).map(Ve.getSlotID)),Ke.store.dispatch({type:"NEW_FETCH_BID_REQUEST",fid:e.bidReqID,pto:n}),Ke.store.dispatch({type:"RECORD_ORIGINAL_BID_CONFIG",bidConfig:e}),(0,Ye.isDebugEnabled)("fake_bids"))V(e,t);else if(We.HAS_XHR_SUPPORT)if(Ke.store.dispatch({type:"SHOULD_CHUNK_REQUESTS",value:(0,Qe.shouldSample)(Ke.store.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION)}),Ke.store.getState().experiments.chunkRequests&&ze()){o=Be(e);for(var a=0;a<o.length;a++)o[a].bidReqID=e.bidReqID+"-"+a;Ke.store.dispatch({type:"ADD_CHUNKED_REQUESTS",fid:e.bidReqID,numChunks:o.length}),o.forEach(function(e){l((0,it.buildBidUrl)(e,n),t,e.bidReqID)})}else l((0,it.buildBidUrl)(e,n),t,e.bidReqID);else(0,tt.loadScriptTag)((0,it.buildBidUrl)(e,n),t)}function Be(e){for(var t=Math.ceil(e.slots.length/Ke.store.getState().cfg.MAX_SLOTS_PER_REQUEST),r=new Array(t),n=0;n<t;n++){var o=n*Ke.store.getState().cfg.MAX_SLOTS_PER_REQUEST;r[n]={slots:e.slots.slice(o,o+Ke.store.getState().cfg.MAX_SLOTS_PER_REQUEST)}}return r.map(function(t){return qe({},e,t)})}function xe(e){(0,Qe.safeObjectHasProp)(Ke.store.getState().config,"adServer")?ot.displayAdServer.isSupported?(j(e),$()):(0,et.reportError)(new Error("apstag.setDisplayBids called with unsupported ad server: "+Ke.store.getState().config.adServer),"__error-invalid_ad_server_setdisplaybids__",!0):(0,et.reportError)(new Error("apstag.setDisplayBids called without specifying ad server"),"__error-no_ad_server_setdisplaybids__",!0)}function Ne(e,t){(0,ot.setDisplayAdServer)(e.adServer);var r=b(e);ye(),"success"===r&&"function"==typeof t&&t()}function He(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"display";switch(e){case"display":return We.DISPLAY_TARGETING_KEYS;case"video":return We.VIDEO_TARGETING_KEYS;default:return(0,it.isNewBidObjectRequired)(Ke.store.getState(),ot.displayAdServer)&&(0,Qe.isArray)(Ke.store.getState().targetingKeys[e])?Ke.store.getState().targetingKeys[e]:"unknown targeting type "+e}}function Me(){return Ke.store.getState().AAXReqs.reduce(function(e,t){return t.bidConfig.slots.reduce(function(e,t){return e[t.slotID]=t.slotName,e},e)},{})}function Ge(e,t){var r=t;return function(){return o({method:e,args:arguments}),r.apply(void 0,arguments)}}function ke(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){return(0,et.reportError)(e,t,!0),null}}}try{(0,Qe.safeObjectHasProp)(window,"apstag")&&(0,Qe.safeObjectHasProp)(window.apstag,"_Q")&&0<window.apstag._Q.length&&Ke.store.dispatch({type:"SET_Q",Q:window.apstag._Q})}catch(e){(0,et.reportError)(e,"__error-storeApstagQ__")}window.apstag=(oe={punt:Re,init:Ne,debug:Ye.debugPublicApi,_getSlotIdToNameMapping:Me,targetingKeys:He,fetchBids:Ce,setDisplayBids:xe,renderImp:Ae,bids:Re},Object.keys(oe).forEach(function(e){oe[e]=Ge(e,oe[e])}),r?(0,Ye.enableDebugConsole)(!0,e):t&&(0,Ye.enableDebugConsole)(!1,e),Object.keys(oe).forEach(function(e){oe[e]=ke(oe[e],e)}),!0===(0,Ye.getDebugValue)("exposeApi")&&(oe._api={_getBidSetInfo:pe,_applyTargetingToGPTSlot:R,dispatch:Ke.store.dispatch,_clearTargetingFromGPTSlot:v,_clearbidSetOnSlot:E,_doFbSync:L,_getCurrentSlotBids:D,_creativeURL:N,getSlotFetchCounts:ae,buildBidUrl:it.buildBidUrl}),oe),function(){try{nt.IS_RENDER_BIDDING_PAGELOAD&&(0,nt.setRenderBiddingHosts)(),Ke.store.dispatch({type:"SHOULD_CF_ROUTE",value:(0,Qe.shouldSample)(Ke.store.getState().cfg.CF_ROUTING_RATE)}),Ke.store.getState().experiments.shouldCFRoute&&!nt.IS_RENDER_BIDDING_PAGELOAD&&Ke.store.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_BID_HOST",hostValue:"c.amazon-adsystem.com"}),Ke.store.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:(0,Qe.shouldSample)(Ke.store.getState().cfg.LATENCY_SAMPLING_RATE)}),Ke.store.dispatch({type:"SHOULD_SAMPLE_SLOT_RENDER",value:(0,Qe.shouldSample)(Ke.store.getState().cfg.SLOT_RENDER_SAMPLING_RATE)});var e=Ke.store.getState();(e.experiments.shouldSampleLatency||e.displayAdServer.shouldSampleRender)&&ie(),e.displayAdServer.shouldSampleRender&&ce(),e.experiments.shouldSampleLatency&&(re(),ue())}catch(e){(0,et.reportError)(e,"__error-sampleLatency__")}try{S()}catch(e){(0,et.reportError)(e,"__error-doLast__")}if(!ve())try{var t={};t.url=Ke.store.getState().cfg.CSM_RTB_COMMUNICATOR_JS;var r=function(e){e&&"object"!==(void 0===e?"undefined":Ue(e))||(e="Request Timeout or Error"),(0,et.reportError)({message:"csm-rtb-comm-js loading failed",name:e},"__csm-rtb-comm-js__")};t.onload=function(e){e.readyState===XMLHttpRequest.DONE&&200===e.status?eval(e.responseText):r(JSON.stringify({status:e.statusText,response:e.responseXML}))},t.onerror=r,t.ontimeout=r,(0,tt.xhrGet)(t)}catch(e){(0,et.reportError)(e,"__load-csm-rtb-comm-js__")}(0,Ye.pixelDebugModes)()}()}())}catch(e){(0,et.reportError)(e,"__error-global__")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafeFrame=function(e){return!(!(0,o.safeObjectHasProp)(e,"$sf")||!(0,o.safeObjectHasProp)(e.$sf,"ext"))},t.expandSf=function(e,t){try{var r=t.innerWidth,o=t.innerHeight,i=parseInt(e[0],10),a=parseInt(e[1],10),s=i-r,c=a-o,u=t.sfAPI||t.$sf.ext;u&&(r===i&&o===a||(u.register(i,a),u.expand({r:s,b:c,push:!0})))}catch(e){(0,n.reportError)(e,"__error-expandSF__")}},t.is1x1Creative=function(e){return 1===e.innerWidth&&1===e.innerHeight};var n=r(2),o=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isApstagLibrary=function(e){return void 0!==e&&!!(0,o.isObject)(e)&&(0,o.safeObjectHasProp)(e,"debug")},t.hasApstagJsLoaded=function(e){return!!(0,o.safeObjectHasProp)(e,n.APSTAG_LOADED_VARIABLE)&&!0===e[n.APSTAG_LOADED_VARIABLE]};var n=r(1),o=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayAdServerAppNexus=void 0;var n=r(0),o={isSupported:!0,needNewBidObject:!1,cmdQueuePush:function(e){window.apntag.anq.push(e)},setTargeting:function(e,t,r){void 0===r?window.apntag.requests.keywords[e]=t:r.keywords[e]=t},getTargeting:function(e,t){var r;return void 0===(r=void 0===t?((0,n.safeObjectHasProp)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={}),window.apntag.requests.keywords[e]):((0,n.safeObjectHasProp)(t,"keywords")||(t.keywords={}),t.keywords[e]))?[]:[r]},clearTargeting:function(e,t){void 0===t?delete window.apntag.requests.keywords[e]:delete t.keywords[e]},slotRenderEndedEvent:function(e){window.apntag.onEvent("adLoaded",e)},hasAdServerObjectLoaded:function(){return void 0!==window.apntag&&(0,n.safeObjectHasProp)(window.apntag,"loaded")&&!0===window.apntag.loaded},isCommandQueueDefined:function(){return void 0!==window.apntag&&void 0!==window.apntag.anq},getSlotElementId:function(e){return e.targetId},getSlots:function(){return Object.keys(window.apntag.requests.tags).map(function(e){return window.apntag.requests.tags[e]})},appendTargeting:function(){}};t.displayAdServerAppNexus=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayAdServerDefault={isSupported:!1,needNewBidObject:!1,cmdQueuePush:function(){},setToBeginningOfCmdQueue:function(){},setTargeting:function(){},getTargeting:function(){return[]},clearTargeting:function(){},slotRenderEndedEvent:function(){},hasAdServerObjectLoaded:function(){},isCommandQueueDefined:function(){},getSlotElementId:function(){},getSlots:function(){return[]},appendTargeting:function(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayAdServerSAS=void 0;var n=r(0),o={isSupported:!0,needNewBidObject:!0,cmdQueuePush:function(e){window.sas.cmd.push(e)},setTargeting:function(){},getTargeting:function(){return[]},clearTargeting:function(){},slotRenderEndedEvent:function(){},hasAdServerObjectLoaded:function(){return(0,n.safeObjectHasProp)(window,"sas")&&(0,n.safeObjectHasProp)(window.sas,"__smartLoaded")&&!0===window.sas.__smartLoaded},isCommandQueueDefined:function(){return!!(0,n.safeObjectHasProp)(window,"sas")&&(0,n.safeObjectHasProp)(window.sas,"cmd")},getSlotElementId:function(){},getSlots:function(){return[]},appendTargeting:function(e){e.forEach(function(e){(0,n.safeObjectHasProp)(e,"slotID")&&-1<e.slotID.indexOf("_")&&(e.sasTargeting=e.helpers.targetingKeys.reduce(function(t,r){return 0<t.length&&(t+=";"),t+r+"_"+e.slotID.split("_")[1]+"="+e.targeting[r]},""))})}};t.displayAdServerSAS=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.isBidEligible=S,t.buildBidUrl=function(e,t){var r=o.store.getState(),g={},m=(0,i.getDebugValue)("host",r.hosts.DEFAULT_AAX_BID_HOST),_=r.cfg.DTB_PATH,S={src:r.config.pubID,u:(0,f.getCurrentUrl)(window),pr:(0,f.getReferrerUrl)(window),pid:(0,l.getPageLoadID)(),cb:e.bidReqID,ws:(0,s.getWindowDimensions)(window),v:a.LIBRARY_VERSION,t:t,slots:function(e){return(0,c.objToUrlParam)(e.map(function(e){var t={};return(0,s.safeObjectHasProp)(e,"mediaType")&&"video"===e.mediaType?(t.id=e.slotID,t.mt=a.MEDIA_TYPES_MAGIC_STRING_FOR_AAX.video):(0,s.safeObjectHasProp)(e,"sizes")&&(t.sd=e.slotID,t.s=e.sizes.filter(s.isArray).map(function(e){return e.join("x")}),(0,s.safeObjectHasProp)(e,"slotName")&&e.slotName!==e.slotID&&(1<e.slotName.length&&(o.store.dispatch({type:"ADD_SLOT_ID",slotID:e.slotID}),t.sd=""+o.store.getState().slotIdMap.indexOf(e.slotID)),t.sn=e.slotName)),(0,s.safeObjectHasProp)(e,"slotParams")&&(0,u.isObject)(e.slotParams)&&(t.kv={},Object.keys(e.slotParams).forEach(function(r){!function e(t){return(0,s.isArray)(t)?t.reduce(function(t,r){return t&&e(r)},!0):"string"==typeof t&&0<t.length}(e.slotParams[r])||(t.kv[r]=e.slotParams[r])})),0===Object.keys(t).length?((0,d.reportError)({name:"Slot Error",message:"There was an error with the configuration for this slot: "+JSON.stringify(e)},"InvalidSlotError",!0),n({},e,{id:"error"})):t}).filter(function(e){return"error"!==e.id}))}(e.slots),pj:function(e,t){var r=e.config.params,o=t.params;r=(0,u.isObject)(r)?r:{},o=(0,u.isObject)(o)?o:{};var i=n({},r,o);return 0===Object.keys(i).length?null:(0,c.objToUrlParam)(i)}(r,e),cfgv:(0,f.getCfgVersion)(),bb:(0,f.getBlockedBidders)(e)};if(o.store.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:e,timeout:t,bidReqID:e.bidReqID,ws:S.ws,url:S.u,rqTs:Date.now()}}),r.experiments.chunkRequests){var b=e.bidReqID.split("-");o.store.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:b[0],networkID:b[1],timestamp:Date.now(),exchangeType:"request"})}r.config.isSelfServePub&&(S.pubid=S.src,S.src=600);var y=(0,f.getApsFirstPartyCookies)();y.fb&&(g[917]=y.fb,S[a.FIRST_PARTY_COOKIE_KEYS.aps_ext_917.urlParam]=(0,c.objToUrlParam)(g)),l.IS_RENDER_BIDDING_PAGELOAD&&(0,l.isFirstAAXRequest)(r)&&(S=n({},S,a.IS_GET_BIDS_URL_PARAM));var h=(0,i.getDebugValue)("bidParams");if((0,u.isObject)(h)&&(S=n({},S,h)),(0,u.isObject)(r.gdpr)){S.gdpre=encodeURIComponent(r.gdpr.enabled),S.gdprc=encodeURIComponent(r.gdpr.consent);var v=JSON.parse(r.gdpr.log);if((0,s.hasLocalStorage)()){var E=window.localStorage.getItem(p.cmpResponseKey);try{E=JSON.parse(E)}catch(e){E=null}window.localStorage.removeItem(p.cmpResponseKey),null!==E&&(v.rtimes=E);var O=window.localStorage.getItem(p.cmpLocalStorageChanged);null!==O&&(window.localStorage.removeItem(p.cmpLocalStorageChanged),v.cc=O)}S.gdprl=(0,c.objToUrlParam)(v)}var D=Object.keys(S).filter(function(e){return(0,s.safeObjectHasProp)(S,e)&&"undefined"!==S[e]&&""!==S[e]&&null!==S[e]}).map(function(e){return e+"="+S[e]}).join("&");y.cookiesParams&&(D+=y.cookiesParams);var A=""+a.PROTOCOL+m+_+"/bid?"+D;return o.store.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.bidReqID,key:"urlLength",value:A.length}),A},t.isNewBidObjectRequired=b,t.createBidQsParams=function(e,t){var r=e.targeting.map(function(t){return"&"+t+"="+e[t]}).join("");return!0===t&&(r=encodeURIComponent(r)),r},t.createPublicStateTrackingBidObject=y,t.addStateTrackingBidsToRealBids=function(e,t,r){var n,o=e.map(m.getSlotID),i=t.slots.filter(m.isDisplaySlot).map(m.getSlotID).filter(function(e){return!(0,s.inArray)(o,e)});return n=r?a.SLOT_STATES.bidInFlight:a.SLOT_STATES.noBid,e.concat(i.map(function(e){return y(e,n)}))},t.mapSlotIDValues=function(e){(0,s.safeObjectHasProp)(e,"slots")&&e.slots.forEach(function(e){e.slotID=o.store.getState().slotIdMap[e.slotID]||e.slotID})},t.getNewSlotBidsAndExposeForRequestedSlots=function(e){var t=e.map(m.getSlotID),r=o.store.getState();return Object.keys(r.slotBids).filter(function(e){return(0,s.inArray)(t,e)}).reduce(function(e,t){var n=r.slotBids[t].filter(function(e){return e.bidState===a.BID_STATES.new}).filter(S);if(0<n.length){var i=n[n.length-1];o.store.dispatch({type:"BID_STATE_CHANGE",slotID:t,_targetingSetID:i._targetingSetID,bidState:a.BID_STATES.exposed}),e[t]=i}return e},{})};var o=r(3),i=r(4),a=r(1),s=r(0),c=r(7),u=r(29),d=r(2),l=r(14),f=r(6),p=r(8),g=r(15),m=r(10),_=24e4;function S(e){if(-1!==o.store.getState().displayAdServer.noBidSlotIDs.indexOf(e.slotID))return!1;var t=o.store.getState().AAXReqs.filter(function(t){return t.bidReqID===e.bidReqID})[0];return!((0,s.safeObjectHasProp)(t,"rqTs")&&Date.now()-t.rqTs>_||(0,s.safeObjectHasProp)(t,"url")&&!(0,s.areTwoUrlsTheSame)(t.url,(0,f.getCurrentUrl)(window))||e.bidState===a.BID_STATES.rendered)}function b(e,t){return(0,s.safeObjectHasProp)(e,"config")&&(0,s.safeObjectHasProp)(e.config,"deals")&&!0===e.config.deals||!0===t.needNewBidObject}function y(e,t){var r="0x0";return b(o.store.getState(),g.displayAdServer)?{slotID:e,size:r,mediaType:"banner",targeting:{amznbid:t,amzniid:"",amznp:t,amznsz:r},helpers:{targetingKeys:["amznbid","amzniid","amznp","amznsz"]}}:{slotID:e,amzniid:"",amznbid:t,amznp:t,amznsz:r,size:r}}},function(e,t,r){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(o<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])_(s)||!v(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,o=!0}return r.apply(this,arguments)}};var a,s={};function c(e,r){var n={seen:[],stylize:d};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),m(r)?n.showHidden=r:r&&t._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,e,n.depth)}function u(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function d(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&D(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return b(o)||(o=l(e,o,n)),o}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return S(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return a.forEach(function(e,r){t[e]=!0}),t}();if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),O(r)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return f(r);if(0===a.length){if(D(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(h(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return e.stylize(Date.prototype.toString.call(r),"date");if(O(r))return f(r)}var u,d="",v=!1,A=["{","}"];return g(r)&&(v=!0,A=["[","]"]),D(r)&&(d=" [Function"+(r.name?": "+r.name:"")+"]"),h(r)&&(d=" "+RegExp.prototype.toString.call(r)),E(r)&&(d=" "+Date.prototype.toUTCString.call(r)),O(r)&&(d=" "+f(r)),0!==a.length||v&&0!=r.length?n<0?h(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=v?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(p(e,t,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(e,t,r,n,o,!0))}),i}(e,r,n,s,a):a.map(function(t){return p(e,r,n,s,t,v)}),e.seen.pop(),function(e,t,r){return 60<e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,d,A)):A[0]+d+A[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?-1<(s=_(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return s;a=(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function _(e){return null===e}function S(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function h(e){return v(e)&&"[object RegExp]"===A(e)}function v(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e}function E(e){return v(e)&&"[object Date]"===A(e)}function O(e){return v(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.debuglog=function(r){return y(a)&&(a=e.env.NODE_DEBUG||""),r=r.toUpperCase(),s[r]||(new RegExp("\\b"+r+"\\b","i").test(a)?(e.pid,s[r]=function(){t.format.apply(t,arguments)}):s[r]=function(){}),s[r]},(t.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=g,t.isBoolean=m,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=S,t.isString=b,t.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":n(e))},t.isUndefined=y,t.isRegExp=h,t.isObject=v,t.isDate=E,t.isError=O,t.isFunction=D,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":n(e))||void 0===e},t.isBuffer=r(31),t.log=function(){},t.inherits=r(32),t._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function w(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(n){r(n)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");function i(){return o.apply(a,arguments)}var a=this;t.apply(this,r).then(function(t){e.nextTick(i,null,t)},function(t){e.nextTick(w,t,i)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,o(t)),r}}).call(this,r(30))},function(e,t,r){"use strict";var n,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,d=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?d=u.concat(d):f=-1,d.length&&g())}function g(){if(!l){var e=c(p);l=!0;for(var t=d.length;t;){for(u=d,d=[];++f<t;)u&&u[f].run();f=-1,t=d.length}u=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new m(e,t)),1!==d.length||l||c(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return e&&"object"===(void 0===e?"undefined":n(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,r){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}]);
//# sourceMappingURL=apstag.js.map